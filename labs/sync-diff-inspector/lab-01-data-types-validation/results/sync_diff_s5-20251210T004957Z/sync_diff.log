[2025/12/10 00:49:58.373 +00:00] [INFO] [printer.go:49] ["Welcome to sync_diff_inspector"] ["Release Version"=None] ["Git Commit Hash"=None] ["Git Branch"=None] ["UTC Build Time"=None] ["Go Version"=go1.24.4]
[2025/12/10 00:49:58.374 +00:00] [INFO] [main.go:102] [config="{\"check-thread-count\":4,\"split-thread-count\":5,\"export-fix-sql\":true,\"check-struct-only\":false,\"dm-addr\":\"\",\"dm-task\":\"\",\"data-sources\":{\"mysql\":{\"host\":\"127.0.0.1\",\"port\":3307,\"user\":\"root\",\"password\":\"******\",\"sql-mode\":\"\",\"snapshot\":\"\",\"sql-hint-use-index\":\"\",\"security\":null,\"route-rules\":null,\"Router\":{\"Selector\":{}},\"Conn\":null,\"session\":null},\"tidb\":{\"host\":\"127.0.0.1\",\"port\":4000,\"user\":\"root\",\"password\":\"******\",\"sql-mode\":\"\",\"snapshot\":\"\",\"sql-hint-use-index\":\"\",\"security\":null,\"route-rules\":null,\"Router\":{\"Selector\":{}},\"Conn\":null,\"session\":null}},\"routes\":null,\"table-configs\":null,\"task\":{\"source-instances\":[\"mysql\"],\"source-routes\":null,\"target-instance\":\"tidb\",\"target-check-tables\":[\"sakila.*\"],\"target-configs\":null,\"output-dir\":\"/results/sync_diff_s5-20251210T004957Z\",\"SourceInstances\":[{\"host\":\"127.0.0.1\",\"port\":3307,\"user\":\"root\",\"password\":\"******\",\"sql-mode\":\"\",\"snapshot\":\"\",\"sql-hint-use-index\":\"\",\"security\":null,\"route-rules\":null,\"Router\":{\"Selector\":{}},\"Conn\":null,\"session\":null}],\"TargetInstance\":{\"host\":\"127.0.0.1\",\"port\":4000,\"user\":\"root\",\"password\":\"******\",\"sql-mode\":\"\",\"snapshot\":\"\",\"sql-hint-use-index\":\"\",\"security\":null,\"route-rules\":null,\"Router\":{\"Selector\":{}},\"Conn\":null,\"session\":null},\"TargetTableConfigs\":null,\"TargetCheckTables\":[{}],\"FixDir\":\"/results/sync_diff_s5-20251210T004957Z/fix-on-tidb\",\"CheckpointDir\":\"/results/sync_diff_s5-20251210T004957Z/checkpoint\",\"HashFile\":\"\"},\"ConfigFile\":\"/conf/s5_tmp_20251210T004957Z.toml\",\"PrintVersion\":false}"]
[2025/12/10 00:49:58.396 +00:00] [INFO] [mysql_shard.go:393] ["will increase connection configurations for DB of instance"] ["connection limit"=10]
[2025/12/10 00:49:58.396 +00:00] [INFO] [source.go:435] ["table match check finished"]
[2025/12/10 00:49:58.397 +00:00] [INFO] [tidb.go:262] ["find router for tidb source"]
[2025/12/10 00:49:58.400 +00:00] [INFO] [source.go:435] ["table match check finished"]
[2025/12/10 00:49:58.401 +00:00] [INFO] [diff.go:386] ["The downstream is TiDB. pick it as work source first"]
[2025/12/10 00:49:58.402 +00:00] [INFO] [diff.go:221] ["not found checkpoint file, start from beginning"]
[2025/12/10 00:49:58.404 +00:00] [WARN] [utils.go:371] ["Ignoring collation differences"] ["column name"=first_name] ["collation source"=utf8mb4_0900_ai_ci] ["collation target"=utf8mb4_bin]
[2025/12/10 00:49:58.404 +00:00] [WARN] [utils.go:371] ["Ignoring collation differences"] ["column name"=last_name] ["collation source"=utf8mb4_0900_ai_ci] ["collation target"=utf8mb4_bin]
[2025/12/10 00:49:58.404 +00:00] [WARN] [utils.go:371] ["Ignoring collation differences"] ["column name"=email] ["collation source"=utf8mb4_0900_ai_ci] ["collation target"=utf8mb4_bin]
[2025/12/10 00:49:58.404 +00:00] [WARN] [utils.go:371] ["Ignoring collation differences"] ["column name"=username] ["collation source"=utf8mb4_0900_ai_ci] ["collation target"=utf8mb4_bin]
[2025/12/10 00:49:58.407 +00:00] [WARN] [utils.go:371] ["Ignoring collation differences"] ["column name"=name] ["collation source"=utf8mb4_0900_ai_ci] ["collation target"=utf8mb4_bin]
[2025/12/10 00:49:58.408 +00:00] [WARN] [utils.go:371] ["Ignoring collation differences"] ["column name"=title] ["collation source"=utf8mb4_0900_ai_ci] ["collation target"=utf8mb4_bin]
[2025/12/10 00:49:58.410 +00:00] [FATAL] [main.go:132] ["failed to check structure difference"] [error="[ddl:1170]BLOB/TEXT column 'description' used in key specification without a key length"] [errorVerbose="[ddl:1170]BLOB/TEXT column 'description' used in key specification without a key length\ngithub.com/pingcap/errors.(*Error).GenWithStackByArgs\n\tgithub.com/pingcap/errors@v0.11.5-0.20250523034308-74f78ae071ee/normalize.go:177\ngithub.com/pingcap/tidb/pkg/ddl.checkIndexColumn\n\tgithub.com/pingcap/tidb@v1.1.0-beta.0.20250925123346-8ea80e6b2b42/pkg/ddl/index.go:248\ngithub.com/pingcap/tidb/pkg/ddl.buildIndexColumns\n\tgithub.com/pingcap/tidb@v1.1.0-beta.0.20250925123346-8ea80e6b2b42/pkg/ddl/index.go:123\ngithub.com/pingcap/tidb/pkg/ddl.BuildIndexInfo\n\tgithub.com/pingcap/tidb@v1.1.0-beta.0.20250925123346-8ea80e6b2b42/pkg/ddl/index.go:382\ngithub.com/pingcap/tidb/pkg/ddl.BuildTableInfo\n\tgithub.com/pingcap/tidb@v1.1.0-beta.0.20250925123346-8ea80e6b2b42/pkg/ddl/create_table.go:1448\ngithub.com/pingcap/tidb/pkg/ddl.BuildTableInfoWithStmt\n\tgithub.com/pingcap/tidb@v1.1.0-beta.0.20250925123346-8ea80e6b2b42/pkg/ddl/create_table.go:791\ngithub.com/pingcap/tiflow/sync_diff_inspector/utils.GetTableInfoBySQL\n\tgithub.com/pingcap/tiflow/sync_diff_inspector/utils/table.go:208\ngithub.com/pingcap/tiflow/sync_diff_inspector/utils.GetTableInfo\n\tgithub.com/pingcap/tiflow/sync_diff_inspector/utils/table.go:194\ngithub.com/pingcap/tiflow/sync_diff_inspector/source.(*MySQLSources).GetSourceStructInfo\n\tgithub.com/pingcap/tiflow/sync_diff_inspector/source/mysql_shard.go:269\ngithub.com/pingcap/tiflow/sync_diff_inspector/diff.(*Diff).compareStruct\n\tgithub.com/pingcap/tiflow/sync_diff_inspector/diff/diff.go:346\ngithub.com/pingcap/tiflow/sync_diff_inspector/diff.(*Diff).StructEqual\n\tgithub.com/pingcap/tiflow/sync_diff_inspector/diff/diff.go:334\nmain.checkSyncState\n\tgithub.com/pingcap/tiflow/sync_diff_inspector/main.go:128\nmain.main\n\tgithub.com/pingcap/tiflow/sync_diff_inspector/main.go:105\nruntime.main\n\truntime/proc.go:283\nruntime.goexit\n\truntime/asm_arm64.s:1223"] [stack="main.checkSyncState\n\tgithub.com/pingcap/tiflow/sync_diff_inspector/main.go:132\nmain.main\n\tgithub.com/pingcap/tiflow/sync_diff_inspector/main.go:105\nruntime.main\n\truntime/proc.go:283"]

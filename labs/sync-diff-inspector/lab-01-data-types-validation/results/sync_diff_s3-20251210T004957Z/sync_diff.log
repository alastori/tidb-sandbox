[2025/12/10 00:49:58.041 +00:00] [INFO] [printer.go:49] ["Welcome to sync_diff_inspector"] ["Release Version"=None] ["Git Commit Hash"=None] ["Git Branch"=None] ["UTC Build Time"=None] ["Go Version"=go1.24.4]
[2025/12/10 00:49:58.042 +00:00] [INFO] [main.go:102] [config="{\"check-thread-count\":4,\"split-thread-count\":5,\"export-fix-sql\":true,\"check-struct-only\":false,\"dm-addr\":\"\",\"dm-task\":\"\",\"data-sources\":{\"mysql\":{\"host\":\"127.0.0.1\",\"port\":3307,\"user\":\"root\",\"password\":\"******\",\"sql-mode\":\"\",\"snapshot\":\"\",\"sql-hint-use-index\":\"\",\"security\":null,\"route-rules\":null,\"Router\":{\"Selector\":{}},\"Conn\":null,\"session\":null},\"tidb\":{\"host\":\"127.0.0.1\",\"port\":4000,\"user\":\"root\",\"password\":\"******\",\"sql-mode\":\"\",\"snapshot\":\"\",\"sql-hint-use-index\":\"\",\"security\":null,\"route-rules\":null,\"Router\":{\"Selector\":{}},\"Conn\":null,\"session\":null}},\"routes\":null,\"table-configs\":null,\"task\":{\"source-instances\":[\"mysql\"],\"source-routes\":null,\"target-instance\":\"tidb\",\"target-check-tables\":[\"lab.s3_bit_test\"],\"target-configs\":null,\"output-dir\":\"/results/sync_diff_s3-20251210T004957Z\",\"SourceInstances\":[{\"host\":\"127.0.0.1\",\"port\":3307,\"user\":\"root\",\"password\":\"******\",\"sql-mode\":\"\",\"snapshot\":\"\",\"sql-hint-use-index\":\"\",\"security\":null,\"route-rules\":null,\"Router\":{\"Selector\":{}},\"Conn\":null,\"session\":null}],\"TargetInstance\":{\"host\":\"127.0.0.1\",\"port\":4000,\"user\":\"root\",\"password\":\"******\",\"sql-mode\":\"\",\"snapshot\":\"\",\"sql-hint-use-index\":\"\",\"security\":null,\"route-rules\":null,\"Router\":{\"Selector\":{}},\"Conn\":null,\"session\":null},\"TargetTableConfigs\":null,\"TargetCheckTables\":[{}],\"FixDir\":\"/results/sync_diff_s3-20251210T004957Z/fix-on-tidb\",\"CheckpointDir\":\"/results/sync_diff_s3-20251210T004957Z/checkpoint\",\"HashFile\":\"\"},\"ConfigFile\":\"/conf/s3_tmp_20251210T004957Z.toml\",\"PrintVersion\":false}"]
[2025/12/10 00:49:58.052 +00:00] [INFO] [mysql_shard.go:393] ["will increase connection configurations for DB of instance"] ["connection limit"=10]
[2025/12/10 00:49:58.052 +00:00] [INFO] [source.go:435] ["table match check finished"]
[2025/12/10 00:49:58.052 +00:00] [INFO] [tidb.go:262] ["find router for tidb source"]
[2025/12/10 00:49:58.056 +00:00] [INFO] [source.go:435] ["table match check finished"]
[2025/12/10 00:49:58.057 +00:00] [INFO] [diff.go:386] ["The downstream is TiDB. pick it as work source first"]
[2025/12/10 00:49:58.057 +00:00] [INFO] [diff.go:221] ["not found checkpoint file, start from beginning"]
[2025/12/10 00:49:58.060 +00:00] [WARN] [utils.go:371] ["Ignoring collation differences"] ["column name"=description] ["collation source"=utf8mb4_0900_ai_ci] ["collation target"=utf8mb4_bin]
[2025/12/10 00:49:58.060 +00:00] [INFO] [diff.go:778] ["start writeSQLs goroutine"]
[2025/12/10 00:49:58.060 +00:00] [INFO] [diff.go:400] ["start handleCheckpoint goroutine"]
[2025/12/10 00:49:58.067 +00:00] [INFO] [tidb.go:60] ["failed to build bucket iterator, fall back to use random iterator"] [error="primary key on id in buckets info not found"] [errorVerbose="primary key on id in buckets info not found\ngithub.com/pingcap/errors.NotFoundf\n\tgithub.com/pingcap/errors@v0.11.5-0.20250523034308-74f78ae071ee/juju_adaptor.go:131\ngithub.com/pingcap/tidb/pkg/util/dbutil.GetBucketsInfo\n\tgithub.com/pingcap/tidb@v1.1.0-beta.0.20250925123346-8ea80e6b2b42/pkg/util/dbutil/common.go:529\ngithub.com/pingcap/tiflow/sync_diff_inspector/splitter.(*BucketIterator).init\n\tgithub.com/pingcap/tiflow/sync_diff_inspector/splitter/bucket.go:152\ngithub.com/pingcap/tiflow/sync_diff_inspector/splitter.NewBucketIteratorWithCheckpoint\n\tgithub.com/pingcap/tiflow/sync_diff_inspector/splitter/bucket.go:91\ngithub.com/pingcap/tiflow/sync_diff_inspector/source.(*TiDBTableAnalyzer).AnalyzeSplitter\n\tgithub.com/pingcap/tiflow/sync_diff_inspector/source/tidb.go:56\ngithub.com/pingcap/tiflow/sync_diff_inspector/source.(*ChunksIterator).produceChunks.func4\n\tgithub.com/pingcap/tiflow/sync_diff_inspector/source/chunks_iter.go:149\ngithub.com/pingcap/tiflow/sync_diff_inspector/utils.(*WorkerPool).Apply.func1\n\tgithub.com/pingcap/tiflow/sync_diff_inspector/utils/utils.go:107\nruntime.goexit\n\truntime/asm_arm64.s:1223"]
[2025/12/10 00:49:58.068 +00:00] [INFO] [random.go:167] ["get chunk size for table"] ["chunk size"=50000] [db=lab] [table=s3_bit_test]
[2025/12/10 00:49:58.068 +00:00] [INFO] [random.go:173] ["split range by random"] ["row count"=7] ["split chunk num"=1]
[2025/12/10 00:49:58.069 +00:00] [INFO] [diff.go:310] ["global consume chunk info"] ["chunk index"="{\"table-index\":0,\"bucket-index-left\":0,\"bucket-index-right\":0,\"chunk-index\":0,\"chunk-count\":1}"] ["chunk bound"="[]"]
[2025/12/10 00:49:58.070 +00:00] [INFO] [diff.go:789] ["write sql channel closed"]
[2025/12/10 00:49:58.070 +00:00] [INFO] [diff.go:780] ["close writeSQLs goroutine"]
[2025/12/10 00:49:58.070 +00:00] [INFO] [diff.go:428] ["Stop do checkpoint"]
[2025/12/10 00:49:58.072 +00:00] [INFO] [checkpoints.go:255] ["save checkpoint"] [chunk="{\"state\":\"success\",\"chunk-range\":{\"index\":{\"table-index\":0,\"bucket-index-left\":0,\"bucket-index-right\":0,\"chunk-index\":0,\"chunk-count\":1},\"type\":2,\"bounds\":[],\"is-first\":false,\"is-last\":false,\"where\":\"((TRUE) AND (TRUE))\",\"args\":null,\"index-column-names\":[{\"O\":\"id\",\"L\":\"id\"}]},\"index-id\":0}"] [state=success]
[2025/12/10 00:49:58.072 +00:00] [INFO] [diff.go:402] ["close handleCheckpoint goroutine"]
[2025/12/10 00:49:58.073 +00:00] [WARN] [report.go:165] ["fail to get the correct size of table, if you want to get the correct size, please analyze the corresponding tables"] [table=`lab`.`s3_bit_test`] []
[2025/12/10 00:49:58.075 +00:00] [INFO] [main.go:115] ["check data finished"] [cost=32.677365ms]
[2025/12/10 00:49:58.075 +00:00] [INFO] [main.go:109] ["check pass!!!"]
